"$schema" = "node_modules/wrangler/config-schema.json"
name = "tanstarter"
compatibility_date = "2025-09-02"
compatibility_flags = ["nodejs_compat"]
main = "./src/server-entry.ts"

[observability]
enabled = true

# Public variables (keep in sync with .env.production)
[vars]
VITE_BASE_URL = "https://tanstarter.flybullet.net"
VITE_APP_NAME = "Tanstarter"
VITE_ALLOW_SIGNUP = "true"
VITE_ALLOW_PASSWORD_AUTH = "true"
VITE_ALLOW_GITHUB_AUTH = "true"
VITE_ALLOW_GOOGLE_AUTH = "true"
VITE_ALLOW_FEISHU_AUTH = "false"
BETTER_AUTH_URL = "https://tanstarter.flybullet.net"

# Secrets - set via `pnpm cf:secret put <KEY>`
# ADMIN_EMAILS          - Comma-separated admin emails
# BETTER_AUTH_SECRET    - Auth secret (min 32 chars)
# GITHUB_CLIENT_ID      - GitHub OAuth
# GITHUB_CLIENT_SECRET
# GOOGLE_CLIENT_ID      - Google OAuth
# GOOGLE_CLIENT_SECRET
# FEISHU_CLIENT_ID      - Feishu OAuth
# FEISHU_CLIENT_SECRET

# [[r2_buckets]]
# binding = 'R2'
# bucket_name = 'app-cloud-storage'

[[d1_databases]]
binding = "DB"
database_name = "tanstarter-db"
database_id = "810cbd35-4afa-4ac2-a28d-72c8b448b1a8"
